import java.util.Set;
import java.util.*;
import java.util.function.*;

/*
 * Pseudo-algorithm
Is the set passed empty? Done
If not, take an element out
recursively call method on the remainder of the set
return the set composed of the Union of 
(1) the powerset of the set without the element (from the recursive call) 
(2) this same set (i.e., (1)) but with each element therein unioned with the element initially taken out
 */
public class Operations {
	
public static Map<Integer,String> Unicode;
	
	static void Unicode(){
		Unicode = new Hashtable();
		for(int i=0;i<=9;i++){
			 int offset = i + 30;
			 String myUni = "\\u" + "00" + offset;
			Unicode.put(i, myUni);
		}
	}
	
	public static <T> Set<T> filter(Set<T> a, Predicate<T>f){
		Set<T> out = new HashSet<T>();
		for(T e :a){
			if(f.test(e)){
				out.add(e);
			}
		}
		return out;
		
	}
	
	public static <T> Set<T> map(Set<T> a, UnaryOperator<T>f){
		Set<T> out = new HashSet<T>();
		for(T e:a){
			out.add(f.apply(e));
		}
		return out;
	}
	
	public static <Integer,String>Map Unicodemap(int number){
		Map<Object,String> result= new HashMap<>();
		Unicode();
		if(number>= 0 && number <10){
			String unicode = (String)Unicode.get(number);
			result.put(number, unicode);
		}
		else{
			System.out.println("Number is out of range");
		}
		return result;
	}
	
	public static <T> Set<Set<T>> power(Set<T> a) {
		Set <Set<T>> set = new HashSet<Set<T>>();
		if(a.isEmpty()){
			set.add(new HashSet<T>());
			return set;
		}
		List<T> list = new ArrayList<T>(a);
		T firstElement = list.get(0);
		Set<T> restElements = new HashSet<T>(list.subList(1, list.size()));
		for(Set<T> recursionSet:power(restElements)){		
			Set<T> resultSet = new HashSet<T>();		
			resultSet.add(firstElement);		
			resultSet.addAll(recursionSet);			
			set.add(resultSet);
			set.add(recursionSet);			
		}	
		return set;
	}

	
	public static void main (String args []){
		 Set<Integer> a = new HashSet<Integer>();
	      
	      for(int i = 0; i < 20; i++) a.add(i * 2);
	   
	      Set<Integer>  b = Operations.filter(a,(Integer x)->x%4==0);
	      Set<Integer> c = Operations.map(b, (x)->5 * x);
	      System.out.println("Original Set1 = " + a);
	      System.out.println("Filter x % 4");
	      System.out.println("Set after Filter = " + b);
	      System.out.println("Map -> x * 5");
	      System.out.println("Set after Map = " + c);
	      
	      Set<Integer> d = new HashSet<Integer>();
	      d.add(0);
	      d.add(75);
	      d.add(100);
	      
	     Map<Integer,String> map= Operations.Unicodemap(7);
	     Map<Integer,String> map2= Operations.Unicodemap(4);
	     System.out.println("The unicode map is = " + map + map2);
	     
		 Set<Integer> mySet = new HashSet<Integer>();
		 mySet.add(1);
		 mySet.add(2);
		 mySet.add(3);
		 mySet.add(4);
		 for (Set<Integer> s : power(mySet)) {
		     System.out.print(s);
		 }
		 
		
		
	}
}
