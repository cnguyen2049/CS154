import java.util.ArrayList;
import java.util.HashMap;
import java.util.Hashtable;
import java.util.Map;


public class FSM {
	private Map<Character,State> map = new HashMap();
	private int finalState = 0;
	private int currentState = 0;
	
	void addTransition(char token,int state,int newState){

		Character current = token;
		//System.out.println(current);
		if(map.get(current)==null){
			State s1 = new State();
			s1.setTransition(state, newState);
			map.put(token, s1);
			//System.out.println(map);
		}
		else{
			State n = new State();
			//System.out.println("Is this even executing?");
			n.transition.putAll(map.get(current).transition);
			n.setTransition(state,newState);
			//System.out.println(n.transition);
			map.put(token, n);
		}

	}
	
	
	public boolean accept (String in){
		int currentState = 0;
	    String s = in;
	    //System.out.println(s);
	    //System.out.println(s.length());
		for(int i = 0;i<=s.length()-1;i++){
			char symbol = s.charAt(i);
			Character temp  = symbol;
			if(map.get(temp) != null){
				State value = map.get(temp);
				//System.out.println(value.transition.get(currentState));
				if(value.transition.get(currentState)!=null){
					int compare = value.transition.get(currentState);
					currentState = compare;
					//System.out.println("After condition: " + currentState);
				}
				else{
					//System.out.println("Setting to negative");
					currentState = -1;
					
				}
			}
			else{
				//System.out.println("Enters here");
				currentState = -1;
				break;
			}
		}
		//System.out.println(currentState);
		if(currentState == finalState){
			return true;
		}
		else{
		return false;
		}
	
	}

	public void addFinalState(int number){
		finalState = number;
	}

	public class State{
		private int state;
		private int newState;
		private Map<Integer,Integer> transition = new Hashtable<Integer, Integer>();

		public int getnewState(){
			return newState;
		}
		public int getState(){
			return state;
		}
		public Map<Integer,Integer> getMap(){
			return transition;
		}
		public void setTransition(int state,int newState){
				transition.put(state, newState);
				
		}
		public void printOut(){
			System.out.println(transition);
		}
	}

public static void main(String args []){
	FSM m = new FSM();
    m.addTransition('0', 0, 1);
    m.addTransition('0', 1, 1);
    m.addTransition('1', 1, 2);
    m.addTransition('0', 2, 3);
    m.addTransition('1', 2, 2);
    m.addTransition('0', 3, 3);
    m.addFinalState(3);

    System.out.println("001110: "+ m.accept("001110"));
    System.out.println("01100: "+ m.accept("01100"));
    System.out.println("11100: "+ m.accept("11100"));
    System.out.println("001110011: "+ m.accept("001110011"));
	}
}


